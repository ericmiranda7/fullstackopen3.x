(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),o=t(14),u=t.n(o),i=(t(20),t(3)),s=function(e){var n=e.name,t=e.number,c=e.deletePerson;return Object(r.jsx)("div",{children:Object(r.jsxs)("p",{children:[n," ",t,Object(r.jsx)("button",{onClick:c,children:"delete"})]})})},d=function(e){var n=e.persons,t=e.handleClick;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Persons"}),n.map((function(e){return Object(r.jsx)(s,{name:e.name,number:e.number,deletePerson:function(){return t(e)}},e.id)}))]})},h=function(e){var n=e.newName,t=e.handleNameChange,c=e.newNumber,a=e.handleNumberChange,o=e.handleClick;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Add new entry"}),Object(r.jsxs)("form",{children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:n,onChange:t}),"number: ",Object(r.jsx)("input",{value:c,onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",onClick:o,children:"add"})})]})]})},l=function(e){var n=e.searchName,t=e.handleSearchChange;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Search"}),"Filter names with ",Object(r.jsx)("input",{value:n,onChange:t})]})},j=t(4),b=t.n(j),f="/api/persons",m={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},delPerson:function(e){return b.a.delete("".concat(f,"/").concat(e))},updatePerson:function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}},O=function(e){var n=e.message;if(n){var t={color:n.class?"red":"green",paddingTop:"5px",fontSize:"15px"};return Object(r.jsx)("div",{style:t,children:n.message})}return null},p=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),u=Object(i.a)(o,2),s=u[0],j=u[1],b=Object(c.useState)(""),f=Object(i.a)(b,2),p=f[0],v=f[1],x=Object(c.useState)(""),g=Object(i.a)(x,2),w=g[0],C=g[1],k=Object(c.useState)(!0),S=Object(i.a)(k,2),N=S[0],y=S[1],P=Object(c.useState)({}),A=Object(i.a)(P,2),E=A[0],J=A[1];Object(c.useEffect)((function(){return m.getAll().then((function(e){return a(e)}))}),[]);var L=function(e,n){J({message:e,class:n||0}),setTimeout((function(){return J(null)}),5e3)},T=N?t:t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Phonebook"}),Object(r.jsx)(O,{message:E}),Object(r.jsx)(l,{searchName:w,handleSearchChange:function(e){C(e.target.value),e.target.value?y(!1):y(!0)}}),Object(r.jsx)(h,{newName:s,handleNameChange:function(e){return j(e.target.value)},newNumber:p,handleNumberChange:function(e){return v(e.target.value)},handleClick:function(e){e.preventDefault();var n={name:s,number:p},r=t.find((function(e){return e.name===s}));if(r){var c=window.confirm("".concat(s," is already added to phonebook, replace with new number ?"));n.id=r.id,c&&m.updatePerson(r.id,n).then((function(e){return a(t.map((function(t){return L("".concat(n.name,"'s number was changed to ").concat(n.number)),t.id===e.id?n:t})))})).catch((function(e){return L("".concat(r.name," has been deleted from the system"),1)}))}else m.create(n).then((function(e){return a(t.concat(e))})),L("".concat(n.name," was added to the phonebook"))}}),Object(r.jsx)(d,{persons:T,handleClick:function(e){window.confirm("Are you sure you want to delete ".concat(e.name," ?")),m.delPerson(e.id).then((function(n){return a(t.filter((function(n){return n.id!==e.id})))})),L("".concat(e.name," was removed from the phonebook."))}})]})};u.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(p,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.9a8171e3.chunk.js.map