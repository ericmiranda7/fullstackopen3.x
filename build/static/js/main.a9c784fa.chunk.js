(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(1),a=t.n(r),u=t(14),o=t.n(u),i=(t(20),t(3)),s=function(e){var n=e.name,t=e.number,r=e.deletePerson;return Object(c.jsx)("div",{children:Object(c.jsxs)("p",{children:[n," ",t,Object(c.jsx)("button",{onClick:r,children:"delete"})]})})},d=function(e){var n=e.persons,t=e.handleClick;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Persons"}),n.map((function(e){return Object(c.jsx)(s,{name:e.name,number:e.number,deletePerson:function(){return t(e)}},e.id)}))]})},h=function(e){var n=e.newName,t=e.handleNameChange,r=e.newNumber,a=e.handleNumberChange,u=e.handleClick;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Add new entry"}),Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:n,onChange:t}),"number: ",Object(c.jsx)("input",{value:r,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",onClick:u,children:"add"})})]})]})},l=function(e){var n=e.searchName,t=e.handleSearchChange;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Search"}),"Filter names with ",Object(c.jsx)("input",{value:n,onChange:t})]})},b=t(4),j=t.n(b),m="/api/persons",f={getAll:function(){return j.a.get(m).then((function(e){return e.data}))},create:function(e){return j.a.post(m,e).then((function(e){return e.data}))},delPerson:function(e){return j.a.delete("".concat(m,"/").concat(e))},updatePerson:function(e,n){return j.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))}},O=function(e){var n=e.message;if(n){var t={color:n.class?"red":"green",paddingTop:"5px",fontSize:"15px"};return Object(c.jsx)("div",{style:t,children:n.message})}return null},p=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],u=Object(r.useState)(""),o=Object(i.a)(u,2),s=o[0],b=o[1],j=Object(r.useState)(""),m=Object(i.a)(j,2),p=m[0],v=m[1],x=Object(r.useState)(""),g=Object(i.a)(x,2),w=g[0],C=g[1],k=Object(r.useState)(!0),N=Object(i.a)(k,2),S=N[0],y=N[1],P=Object(r.useState)({}),A=Object(i.a)(P,2),E=A[0],J=A[1];Object(r.useEffect)((function(){return f.getAll().then((function(e){return a(e)}))}),[]);var L=function(e,n){J({message:e,class:n||0}),setTimeout((function(){return J(null)}),5e3)},T=S?t:t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(O,{message:E}),Object(c.jsx)(l,{searchName:w,handleSearchChange:function(e){C(e.target.value),e.target.value?y(!1):y(!0)}}),Object(c.jsx)(h,{newName:s,handleNameChange:function(e){return b(e.target.value)},newNumber:p,handleNumberChange:function(e){return v(e.target.value)},handleClick:function(e){e.preventDefault();var n={name:s,number:p},c=t.find((function(e){return e.name===s}));if(c){var r=window.confirm("".concat(s," is already added to phonebook, replace with new number ?"));n.id=c.id,r&&f.updatePerson(c.id,n).then((function(e){return a(t.map((function(t){return L("".concat(n.name,"'s number was changed to ").concat(n.number)),t.id===e.id?n:t})))})).catch((function(e){return L("".concat(c.name," has been deleted from the system"),1)}))}else f.create(n).then((function(e){a(t.concat(e)),L("".concat(n.name," was added to the phonebook"))})).catch((function(e){return L("Name should be minimum 3 characters and number minimum 8 digits",1)}))}}),Object(c.jsx)(d,{persons:T,handleClick:function(e){window.confirm("Are you sure you want to delete ".concat(e.name," ?")),f.delPerson(e.id).then((function(n){return a(t.filter((function(n){return n.id!==e.id})))})),L("".concat(e.name," was removed from the phonebook."))}})]})};o.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.a9c784fa.chunk.js.map